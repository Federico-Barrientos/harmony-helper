{"version":3,"file":"hint.cjs.js","sources":["../../codemirror-graphql/esm/hint.js"],"sourcesContent":["import CodeMirror from 'codemirror';\nimport 'codemirror/addon/hint/show-hint';\nimport { getAutocompleteSuggestions, Position } from 'graphql-language-service';\nCodeMirror.registerHelper('hint', 'graphql', (editor, options) => {\n    const { schema, externalFragments, autocompleteOptions } = options;\n    if (!schema) {\n        return;\n    }\n    const cur = editor.getCursor();\n    const token = editor.getTokenAt(cur);\n    const tokenStart = token.type !== null && /\"|\\w/.test(token.string[0])\n        ? token.start\n        : token.end;\n    const position = new Position(cur.line, tokenStart);\n    const rawResults = getAutocompleteSuggestions(schema, editor.getValue(), position, token, externalFragments, autocompleteOptions);\n    const results = {\n        list: rawResults.map(item => {\n            var _a;\n            return ({\n                text: (_a = item === null || item === void 0 ? void 0 : item.rawInsert) !== null && _a !== void 0 ? _a : item.label,\n                type: item.type,\n                description: item.documentation,\n                isDeprecated: item.isDeprecated,\n                deprecationReason: item.deprecationReason,\n            });\n        }),\n        from: { line: cur.line, ch: tokenStart },\n        to: { line: cur.line, ch: token.end },\n    };\n    if ((results === null || results === void 0 ? void 0 : results.list) && results.list.length > 0) {\n        results.from = CodeMirror.Pos(results.from.line, results.from.ch);\n        results.to = CodeMirror.Pos(results.to.line, results.to.ch);\n        CodeMirror.signal(editor, 'hasCompletion', editor, results, token);\n    }\n    return results;\n});\n//# sourceMappingURL=hint.js.map"],"names":["CodeMirror","editor","options","schema","externalFragments","autocompleteOptions","cur","token","tokenStart","position","Position","results","getAutocompleteSuggestions","item","_a"],"mappings":"8JAGAA,EAAU,WAAC,eAAe,OAAQ,UAAW,CAACC,EAAQC,IAAY,CAC9D,KAAM,CAAE,OAAAC,EAAQ,kBAAAC,EAAmB,oBAAAC,CAAmB,EAAKH,EAC3D,GAAI,CAACC,EACD,OAEJ,MAAMG,EAAML,EAAO,YACbM,EAAQN,EAAO,WAAWK,CAAG,EAC7BE,EAAaD,EAAM,OAAS,MAAQ,OAAO,KAAKA,EAAM,OAAO,CAAC,CAAC,EAC/DA,EAAM,MACNA,EAAM,IACNE,EAAW,IAAIC,EAAQ,SAACJ,EAAI,KAAME,CAAU,EAE5CG,EAAU,CACZ,KAFeC,EAAAA,2BAA2BT,EAAQF,EAAO,WAAYQ,EAAUF,EAAOH,EAAmBC,CAAmB,EAE3G,IAAIQ,GAAQ,CACzB,IAAIC,EACJ,MAAQ,CACJ,MAAOA,EAAKD,GAAS,KAA0B,OAASA,EAAK,aAAe,MAAQC,IAAO,OAASA,EAAKD,EAAK,MAC9G,KAAMA,EAAK,KACX,YAAaA,EAAK,cAClB,aAAcA,EAAK,aACnB,kBAAmBA,EAAK,iBACxC,CACA,CAAS,EACD,KAAM,CAAE,KAAMP,EAAI,KAAM,GAAIE,CAAY,EACxC,GAAI,CAAE,KAAMF,EAAI,KAAM,GAAIC,EAAM,GAAK,CAC7C,EACI,OAAKI,GAAY,MAAsCA,EAAQ,MAASA,EAAQ,KAAK,OAAS,IAC1FA,EAAQ,KAAOX,aAAW,IAAIW,EAAQ,KAAK,KAAMA,EAAQ,KAAK,EAAE,EAChEA,EAAQ,GAAKX,aAAW,IAAIW,EAAQ,GAAG,KAAMA,EAAQ,GAAG,EAAE,EAC1DX,EAAU,WAAC,OAAOC,EAAQ,gBAAiBA,EAAQU,EAASJ,CAAK,GAE9DI,CACX,CAAC"}